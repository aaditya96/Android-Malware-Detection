function [J, grad] = costFunctionReg(theta, X, y, lambda)

m = length(y); % number of training examples

J = 0;
grad = zeros(size(theta));

H = X*theta;
J = (-1/m)*sum(y.*log(sigmoid(H)) + (1-y).*log(1-sigmoid(H)) ) + (lambda/(2*m))*sum(theta(2:size(theta)).^2);

H = sigmoid(H) - y;
thetacopy = theta;
thetacopy(1) = 0;
grad = (transpose(transpose(H)*X))/m + (lambda/m)*thetacopy;

end
